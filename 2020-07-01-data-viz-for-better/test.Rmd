---
title: "A Minimal #TidyTuesday Flipbook"
author: "Gina Reynolds, May 2019"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["kunoichi", "ninjutsu"]
    nature:
      ratio: 16:10
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---


```{r setup, include=F}
knitr::opts_chunk$set(fig.width = 6, message = F, warning = F, 
                      comment = "", cache = F)
```



---

# Set up

Okay. Let's load the the `reveal for xaringan` functions for "flipbooking" and the `tidyverse`.

```{r}
source(file = "https://raw.githubusercontent.com/EvaMaeRey/little_flipbooks_library/master/xaringan_reveal_parentheses_balanced.R")
```


And load the tidyverse.

```{r}
library(tidyverse)
```

And load the data from the tidytuesday github page. 

```{r}
nobel_winners <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-05-14/nobel_winners.csv")

```

---

# Where we are going: 

We'll create this plot.  I have **echo** set to FALSE in the code chunk options here so that you don't see the code, and **eval** to TRUE so that the plot output is produced.  The code chunk is given the name "nobel", and this is used in the in apply_reveal function, which breaks down code by wrangling and plot statements. 

```{r nobel, echo = F, eval = T, fig.height=5}
nobel_winners %>% 
  mutate(age_at_win = prize_year -
           lubridate::year(birth_date)) %>% 
ggplot() + 
  aes(x = prize_year) +  # x axis 
  aes(y = age_at_win) +  # y axis
  geom_point() +
  geom_smooth() +  # loess smoothing
  theme_minimal() +
  labs(x = "Year of prize") +
  labs(y = "Age at Win") +
  labs(caption = "Vis: Gina Reynolds for TidyTuesday") +
  labs(title = "Nobel Prize award year vs. age of winner") +
  labs(subtitle = "Data: \"A dataset of publication records for Nobel laureates\" \nLi, Jichao; Yin, Yian; Fortunato, Santo; Wang Dashun, 2018 ")
```
 

 
---

# How do we get there?

In the next slide, we'll walk through the code that produces this plot, and the output along the way. We use the code `apply_reveal("nobel")` in-line to access the code from the code chunk called *nobel*.
 
---

`r apply_reveal("nobel")`


---

# A second approach: Separate the data manipulation from the plotting.

If you'd like, you can also save your manipulated data and then plot, using the `%>%` to create your pipe line, and then reverse assignment operator `->`.  An example follows. 

---

```{r nobeltransform, echo = F, eval = T, fig.height=5}
nobel_winners %>% 
  mutate(age_at_win = prize_year -
           lubridate::year(birth_date)) -> 
  nobel_winners_w_age
```


---

`r apply_reveal("nobeltransform")`

---
